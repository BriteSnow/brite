"use strict";var brite=brite||{};brite.version="1.1.5","object"==typeof module&&module&&"object"==typeof module.exports?module.exports=brite:"function"==typeof define&&define.amd?define("brite",[],function(){return brite}):window.brite=brite,function(e){function t(t){var r=e.Deferred(),i=n(t);return i.done(function(n){var i,o,a,s=n.config.loadTmpl;if(s&&!w[t]){var u=!0,c=n.config.checkTemplate;if(c){var f="string"==typeof c?c:"#tmpl-"+t;e(f).length>0&&(u=!1)}if(u){i=e.Deferred();a=null,a="function"==typeof brite.config.tmplPath?brite.config.tmplPath(t):brite.config.tmplPath+t+brite.config.tmplExt,e.ajax({url:a,async:!0}).complete(function(n){e(brite.config.componentsHTMLHolder).append(n.responseText),w[t]=!0,i.resolve()})}}var l=n.config.loadCss;if(l){o=e.Deferred(),a=null,a="function"==typeof brite.config.cssPath?brite.config.cssPath(t):brite.config.cssPath+t+".css";var d=b(a,"css");d.done(function(){o.resolve()}).fail(function(){console&&console.log("Brite ERROR: cannot load "+a+". Ignoring issue"),o.resolve()})}e.when(i,o).done(function(){r.resolve(n)})}),i.fail(function(e){console&&console.log("BRITE-ERROR: Brite cannot load component: "+t+"\n\t "+e),r.reject()}),r.promise()}function n(t){var n=e.Deferred(),r=y[t];if(r)n.resolve(r);else{var i=null;i="function"==typeof brite.config.jsPath?brite.config.jsPath(t):brite.config.jsPath+t+".js";var o=b(i,"js");o.done(function(){r=y[t],r?n.resolve(r):n.reject("Component js file ["+i+"] loaded, but it did not seem to have registered the view - it needs to call brite.registerView('"+t+"',...config...) - see documentation")}).fail(function(){n.reject("Component resource file "+i+" not found")})}return n.promise()}function r(n,r,l,d){var p=t(n),v=e.Deferred(),b=e.Deferred(),h=e.Deferred(),m=e.Deferred(),g=v.promise();return g.whenCreate=b.promise(),g.whenInit=h.promise(),g.whenPostDisplay=m.promise(),p.done(function(t){l=o(t,l);var p=a(t);if(l.unique){var y=e("[data-b-view='"+n+"']");if(y.length>0)return p=y.bComponent(),v.resolve(p),v}var w=e.Deferred();if(d)w.resolve(d);else{var E=s(p,r,l);E&&e.isFunction(E.promise)&&!E.jquery?E.done(function(e){w.resolve(e)}).fail(function(){w.reject()}):(E&&(d=E),w.resolve(d))}w.promise().done(function(t){var n;t?("string"==typeof t&&(t=t.trim()),n=e(t),c(n,p,r,l),n.data("componentProcessPromise",g),b.resolve(p),e.when(u(p,r,l)).done(function(){i(p,r,l),h.resolve(p)})):(b.resolve(p),h.resolve(p)),g.whenInit.done(function(){var e,t;if(n&&n.parent()){var i=n.parent().closest("[data-b-view]");i.length>0&&(e=i.data("componentProcessPromise"),e&&e.whenPostDisplay.done(function(){t=f(p,r,l),t.done(function(){m.resolve(p)}).fail(function(e){m.reject(e)})}))}e||(t=f(p,r,l),t.done(function(){m.resolve(p)}).fail(function(e){m.reject(e)}))})}),g.whenPostDisplay.done(function(){v.resolve(p)}).fail(function(e){v.reject(e)})}),p.fail(function(){v.reject(),b.reject(),h.reject(),m.reject()}),g}function i(t,n,r){var i;if(r.transition){var o=brite.getTransition(r.transition);o?o(t,n,r):brite.log.error("Transition ["+r.transition+"] not found. Transitions need to be registered via brite.registerTranstion(..) before call.")}else r.replace&&e(r.replace).bRemove(),r.parent?(i=e(r.parent),i.length>0?(r.emptyParent&&i.bEmpty(),i.append(t.$el)):console&&console.log("BRITE WARNING - parent ",r.parent," not found when displaying",t)):console&&console.log("BRITE WARNING - no parent specified ",t,r)}function o(t,n){var r=e.extend({},t.config,n);return r.componentName=t.name,r}function a(t){var n,r=t.componentFactory;return r?e.isFunction(r)?n=r():e.isPlainObject(r)?n=e.extend({},r):brite.log.error("Invalid ComponentFactory for component ["+t.componentName+"]. Only types Function or Object are supported as componentFactory. Empty component will be created."):brite.log.error("No ComponentFactory for component ["+t.componentName+"]"),n&&(n.name=t.name,n.cid=n.id="bview_"+g++),n}function s(t,n,r){var i=t.create||t.build;return i&&e.isFunction(i)?i.call(t,n,r):void brite.log.error("Invalid 'create' function for component ["+t.name+"].")}function u(t,n,r){var i=t.init;if(e.isFunction(i))return i.call(t,n,r)}function c(e,t,n,r){t.el=e[0],t.$el=t.$element=e,e.data("bview",t),e.attr("data-b-view",r.componentName),e.attr("data-brite-cid",t.cid)}function f(t,n,r){var i=e.Deferred();return t.events&&d(t.events,t.$el,t),t.docEvents&&d(t.docEvents,e(document),t,h+t.id),t.winEvents&&d(t.winEvents,e(window),t,m+t.id),t.parentEvents&&e.each(t.parentEvents,function(e,n){var r=t.$el.bView(e);if(r){var i=t.parentEvents[e];d(i,r.$el,t,"."+t.id)}}),p(t),t.postDisplay?r.postDisplayDelay>=0?setTimeout(function(){l(t,n,r,i)},r.postDisplayDelay):l(t,n,r,i):i.resolve(),i.promise()}function l(t,n,r,i){if(!t.$el)return void i.reject("BRITE ERROR cannot call postDisplay a view already deleted "+(t?t.name:""));var o=t.postDisplay(n,r);o&&e.isFunction(o.promise)?o.done(function(){i.resolve()}):i.resolve()}function d(t,n,r,i){e.each(t,function(t,o){var a=t.split(";"),s=a[0];i&&(s=e.map(e.trim(s).split(" "),function(e){return e+i}).join(" "));var u=a[1],c=v(r,o);if(!c)throw"BRITE ERROR: '"+r.name+"' component event handler function '"+o+"' not found.";n.on(s,u,function(){var t=e.makeArray(arguments);c.apply(r,t)})})}function p(t){var n=t.daoEvents;if(t.daoEvents){var r=t.id;e.each(n,function(n,i){var o=v(t,i);if(!o)throw"BRITE ERROR: '"+t.name+"' component daoEvent handler function '"+i+"' not found.";var a=n.split(";"),s=a[0];s=s.charAt(0).toUpperCase()+s.slice(1);var u=a[1],c=a[2];brite.dao["on"+s](u,c,function(){var n=e.makeArray(arguments);o.apply(t,n)},r)})}}function v(t,n){var r=n;return e.isFunction(r)||(r=t[n]),r}function b(t,n){var r,i=e.Deferred();if("js"===n?(r=document.createElement("script"),r.setAttribute("type","text/javascript"),r.setAttribute("src",t)):"css"===n&&(r=document.createElement("link"),r.setAttribute("rel","stylesheet"),r.setAttribute("type","text/css"),r.setAttribute("href",t)),"js"===n)r.addEventListener?r.onload=function(){i.resolve(t)}:r.onreadystatechange=function(){"loaded"!==r.readyState&&"complete"!==r.readyState||i.resolve(t)},r.addEventListener&&r.addEventListener("error",function(){i.reject()},!0);else if("css"===n)if(document.all)r.onreadystatechange=function(){var e=r.readyState;"loaded"!==e&&"complete"!==e||(r.onreadystatechange=null,i.resolve(t))};else{r.addEventListener&&r.addEventListener("load",function(){i.resolve(t)},!1);var o=document.getElementsByTagName("html")[0],a=document.createElement("img");e(a).css("display","none"),a.onerror=function(){o.removeChild(a),i.resolve(t)},o.appendChild(a),a.src=t}return"undefined"!=typeof r&&document.getElementsByTagName("head")[0].appendChild(r),i.promise()}var h=".",m=".",g=0,y={},w={},E={},j={};brite.registerView=function(t,n,r){var i={};i.name=t,i.componentFactory=r?r:n;var o=r?n:null;i.config=e.extend({},brite.viewDefaultConfig,o),y[t]=i;var a=E[t];a&&(a.resolve(i),delete E[t])},brite.registerComponent=brite.registerView,brite.registerTransition=function(e,t){j[e]=t},brite.getTransition=function(e){return j[e]},brite.display=function(e,t,n,i){return t&&(i=i||{},i.parent=t),r(e,n,i)},brite.legacyDisplay=function(e,t,n){var r=n?n.parent:null;brite.display(e,r,t,n)},brite.attach=function(e,t,n,i){return r(e,n,i,t)},brite.config={componentsHTMLHolder:"body",tmplPath:"tmpl/",jsPath:"js/",cssPath:"css/",tmplExt:".tmpl"},brite.viewDefaultConfig={loadTmpl:!1,loadCss:!1,emptyParent:!1,postDisplayDelay:0},brite.defaultComponentConfig=brite.viewDefaultConfig}(jQuery),function(e){function t(t){if(t){e(document).off(n+t.id),e(window).off(r+t.id),brite.dao&&brite.dao.offAny(t.id),t.parentEvents&&t.$el&&e.each(t.parentEvents,function(e,n){var r=t.$el.bView(e);r&&r.$el&&r.$el.off("."+t.id)});var i=t.destroy;e.isFunction(i)&&i.call(t),delete t.$el,delete t.$element}}var n=".",r=".";e.fn.bEmpty=function(){return this.each(function(){var n=e(this),r=n.bFindComponents();e.each(r,function(e,n){t(n)}),n.empty()})},e.fn.bRemove=function(){return this.each(function(){var n=e(this);if(n.bEmpty(),n.is("[data-b-view]")){var r=n.data("bview");t(r),n.remove()}else n.remove()})}}(jQuery),function(e){e.fn.bView=function(t){var n;return n=t?e(this).closest("[data-b-view='"+t+"']"):e(this).closest("[data-b-view]"),n.data("bview")}}(jQuery),function(e){e.fn.bComponent=e.fn.bView,e.fn.bFindComponents=function(t){var n=[];return this.each(function(){var r,i=e(this);r=t?i.find("[data-b-view='"+t+"']"):i.find("[data-b-view]"),r.each(function(){var t=e(this);n.push(t.data("bview"))})}),n},e.fn.bFindFirstComponent=function(t){var n=[];return this.each(function(){var r,i=e(this);r=t?i.find("[data-b-view='"+t+"']:first"):i.find("[data-b-view]:first"),r.each(function(){var t=e(this);n.push(t.data("bview"))})}),n}}(jQuery),function(e){String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var t={failOnFirst:!0};brite.whenEach=function(n,r,i){function o(){if(u<n.length){var t=n[u],i=r(t,u);"undefined"!=typeof i&&null!==i&&e.isFunction(i.promise)&&!i.jquery?(i.done(function(e){s.push(e),u++,o()}),i.fail(function(t){var n=e.map(function(e){return{success:!0,value:e}});n.push({success:!1,value:t}),a.reject(n)})):(s.push(i),u++,o())}else a.resolve(s)}var a=e.Deferred(),s=[],u=0;return i=e.extend({},t,i),o(),a.promise()};var n="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");brite.uuid=function(e,t){var r=n,i=[];t=t||r.length,e=e||10;for(var o=0;o<e;o++)i[o]=r[0|Math.random()*t];return i.join("")},brite.value=function(e,t){if(!e)return e;if(!t)return e;var n,r,i,o=t.split("."),a=e;for(n=0,r=o.length;n<r;n++){if(i=o[n],null==a)return;if(a=a[i],"undefined"==typeof a)return a}return a},brite.substract=function(t,n){var r={};return e.each(t,function(e,t){var i=n[e];isNaN(t)||isNaN(i)||(r[e]=t-i)}),r},brite.add=function(t,n){var r={};return e.each(t,function(e,t){var i=n[e];isNaN(t)||isNaN(i)||(r[e]=t+i)}),r},brite.array={remove:function(e,t,n){var r=e.slice((n||t)+1||e.length);return e.length=t<0?e.length+t:t,e.push.apply(e,r)},getIndex:function(e,t,n){if(e&&t&&"undefined"!=typeof n){var r,i,o=e.length;for(r=0;r<o;r++)if(i=e[r],i&&i[t]===n)return r}return-1},getItem:function(e,t,n){var r=this.getIndex(e,t,n);return r>-1?e[r]:null},sortBy:function(e,t){function n(e,n){if("undefined"==typeof e)return-1;if("undefined"==typeof n)return 1;var r=e[t],i=n[t];return r<i?-1:r>i?1:0}return e.sort(n)},toMap:function(e,t){var n,r,i,o=e.length,a={};for(n=0;n<o;n++)r=e[n],i=r[t],"undefined"!=typeof i&&null!=i&&(a[i]=r);return a}},brite.randomInt=function(e,t){var n=t-e;return e+Math.floor(Math.random()*(n+1))},brite.inherit=function(e,t){var n=function(){};n.prototype=t.prototype,e.prototype=new n,e._super=t.prototype,e.prototype.constructor=e};var r,i=2;brite.flushUI=function(){brite.ua.hasTouch()&&(r||(r=e("<div id='b-flushUI' style='position:absolute;opacity:1;z-index:-1000;overflow:hidden;width:2px;color:rgba(0,0,0,0)'>flushUI</div>"),e("body").append(r)),i*=-1,r.text("").text(i),r.css("width",i+"px"))}}(jQuery),brite.ua={},function(e){function t(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}}function n(){e.each(i,function(e){brite.ua.browser[e]&&(b=e,s=i[e],a=o[e])})}function r(e,t,n,r){var i=document.createElement("div");return e=r?brite.ua.cssPrefix()+e:e,i.innerHTML='<div style="'+e+": "+n+'"></div>',t=r?brite.ua.cssVarPrefix()+t:t,!!i.firstChild.style[t]}var i={webkit:"-webkit-",chrome:"-webkit-",mozilla:"-moz-",msie:"-ms-",opera:"-o-"},o={webkit:"Webkit",mozilla:"Moz",chrome:"Webkit",msie:"ms",opera:"o"},a=null,s=null,u=null,c=null,f=null,l=null,d=null,p=null,v={},b=null,h=t(navigator.userAgent),m={};h.browser&&(m[h.browser]=!0,m.version=h.version),m.chrome?m.webkit=!0:m.webkit&&(m.safari=!0),brite.ua.browser=m,brite.ua.browserType=function(){return null===b&&n(),b},brite.ua.cssPrefix=function(){return null===s&&n(),s},brite.ua.cssVarPrefix=function(){return null===a&&n(),a},brite.ua.cssHas=function(){if(null===u){var t="has";u="",e.each(brite.ua,function(n){var r,i=brite.ua[n];0===n.indexOf(t)&&e.isFunction(i)&&i.call(brite.ua)&&(r="has-"+n.substring(t.length).toLowerCase(),u+=r+" ")})}return u},brite.ua.cssHasNo=function(){if(null===c){var t="has";c="",e.each(brite.ua,function(n){var r,i=brite.ua[n];0===n.indexOf(t)&&e.isFunction(i)&&(i.call(brite.ua)||(r="has-no-"+n.substring(t.length).toLowerCase(),c+=r+" "))})}return c},brite.ua.supportsEvent=function(e){var t=v[e];return"undefined"==typeof t&&(t=g(e),v[e]=t),t},brite.ua.mouseOnly=!1,brite.ua.hasTouch=function(){return null===f&&(f=this.supportsEvent("touchstart")&&!brite.ua.mouseOnly),f},brite.ua.hasCanvas=function(){if(null===p){var e=document.createElement("canvas");p=!!e.getContext}return p},brite.ua.hasTransition=function(){return null===l&&(l=r("transition","Transition","color 1s linear",!0)),l},brite.ua.hasBackfaceVisibility=function(){return null===d&&(d=r("backface-visibility","BackfaceVisibility","hidden",!0),navigator.platform.toLowerCase().indexOf("win")>-1&&(d=!1)),d};var g=function(){function e(e){var n=document.createElement(t[e]||"div");e="on"+e;var r=e in n;return r||(n.setAttribute(e,"return;"),r="function"==typeof n[e]),n=null,r}var t={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}()}(jQuery);var brite=brite||{};!function(e){function t(e){var t=s[e];if(t)return t;var n="Cannot find the DAO for objectType: "+e;throw n}function n(t){var n,r,i,o={};for(n=t.length-1;n>-1;n--)r=t[n],e.isFunction(r)?o.func=r:o.func?o.func&&1===n?o.actions=r:o.func&&0===n&&(o.objectTypes=r):i=r;if("undefined"==typeof i)throw"BRITE DAO BINDING ERROR: any binding with brite.dao.on*** needs to have a namespace after the function.  Remember to cleanup the event at component close with brite.dao.off(mynamespace)";if(o.actions){var a="."+i+" ";o.actions=o.actions.split(",").join(a)+a}else o.actions=f+"."+i;if(o.objectTypes){var s=o.objectTypes.split(",");e.each(s,function(t,n){s[t]="."+e.trim(n)}),o.objectTypes=s.join(",")}return o.namespace=i,o}function r(t,n,r,i){var o=e.extend(jQuery.Event(i.action),{daoEvent:i}),a=t[r];a||(t[r]=a=e("<div class='"+r+"'></div>"),n.append(a)),a.trigger(o),"remove"===o.type&&0==n.find("."+r).size()&&a&&n.append(a),o.type=f,a.trigger(o)}function i(e,t,n){var i={entityType:e,action:t,resultPromise:n};r(d,l,e,i)}function o(e,t,n){var i={entityType:e,action:t,result:n};r(v,p,e,i)}function a(t){if(t&&e.isFunction(t.promise))return t;var n=e.Deferred();return n.resolve(t),n}var s={};brite.dao=function(e){return t(e)};var u={isDataChange:!0,entityType:!0},c=/remove|delete|create|update/i;brite.registerDao=function(t){var n={},r=e.isFunction(t.entityType)?t.entityType():t.entityType;if(!r||"string"!=typeof r)throw"Cannot register daoHandler because entityType '"+r+"' is not valid. Make sure the daoHandler emplement .entityType() method which must return a string of the entity type";return n._entityType=r,n._handler=t,e.each(t,function(s){if(e.isFunction(t[s])&&!u[s]){var f=s,l=c.test(f);t.isDataChange&&(l=l||t.isDataChange(f)),n[f]=function(e,n,r){return function(){var s=t[n].apply(t,arguments),u=a(s);return i(e,n,u),u.done(function(t){o(e,n,t),r&&brite.triggerDataChange(e,n,t)}),u}}(r,f,l)}}),s[r]=n,e.isFunction(n.init)&&n.init(r),n};var f="_ALL_",l=e("<div></div>"),d={};brite.dao.onDao=function(e,t,r,i){var o=n(arguments);return l.on(o.actions,o.objectTypes,o.func),o.namespace},brite.dao.offDao=function(e){l.off("."+e)};var p=e("<div></div>"),v={};brite.dao.onResult=function(e,t,r,i){var o=n(arguments);return p.on(o.actions,o.objectTypes,o.func),o.namespace},brite.dao.offResult=function(e){p.off("."+e)};var b=e("<div></div>"),h={};brite.dao.onDataChange=function(e,t,r,i){var o=n(arguments);return b.on(o.actions,o.objectTypes,o.func),o.namespace},brite.dao.offDataChange=function(e){b.off("."+e)},brite.triggerDataChange=function(e,t,n){var i={entityType:e,action:t,result:n};r(h,b,e,i)},brite.dao.offAny=function(e){brite.dao.offResult(e),brite.dao.offDao(e),brite.dao.offDataChange(e)}}(jQuery),function(e){e.fn.bEntity=function(t){var n=null;return this.each(function(){if(null===n){var r,i=e(this);if(r=t?i.closest("[data-entity='"+t+"']"):i.closest("[data-entity]"),r.length>0){n={type:r.attr("data-entity"),id:r.attr("data-entity-id"),$el:r};var o=r.attr("data-entity-name");"undefined"!=typeof o&&(n.name=o)}}}),n}}(jQuery),function(e){e.fn.bObjRef=function(t){var n=[];return this.each(function(){var r,i=e(this);if(r=t?i.closest("[data-obj_type='"+t+"']"):i.closest("[data-obj_type]"),r.length>0){var o={type:r.attr("data-obj_type"),id:r.attr("data-obj_id"),$element:r};n.push(o)}}),0===n.length?null:1===n.length?n[0]:n}}(jQuery);var brite=brite||{};brite.event=brite.event||{},function(e){brite.event.fixTouchEvent=function(e){if(brite.ua.hasTouch()){var t=e.originalEvent;t.touches.length>0&&(e.pageX=t.touches[0].pageX,e.pageY=t.touches[0].pageY)}return e},brite.event.eventPagePosition=function(e){var t,n;return e.originalEvent&&e.originalEvent.touches?(t=e.originalEvent.touches[0].pageX,n=e.originalEvent.touches[0].pageY):(t=e.pageX,n=e.pageY),{pageX:t,pageY:n}}}(jQuery),function(e){function t(e,t){e.css("transition",t.transition),e.css("transform",t.transform)}e.fn.bTransition=function(n){return this.each(function(){var r=e(this),i=-1;"boolean"==typeof n.onTimeout?i=n.onTimeout?0:-1:"number"==typeof n.onTimeout&&(i=n.onTimeout),i>-1?setTimeout(function(){t(r,n)},i):t(r,n)})}}(jQuery),function(e){function t(){return brite.ua.hasTouch()?c:u}function n(n){var r=t();e(this).on(r.start,n.selector,function(t){function n(e){if(i(),e.target===f&&!s){var t=e.eventPhase,n=u===f&&2===t||u!==f&&3===t;n&&!e.originalEvent.b_processed&&(brite.event.fixTouchEvent(l),a(u,e,{type:"btap",pageX:l.pageX,pageY:l.pageY}),e.originalEvent.b_processed=!0)}}function i(){clearTimeout(o),c.off(r.end,n)}var o,u=this,c=e(u),f=t.target,l=t;c.on(r.end,n),o=setTimeout(function(){s||(brite.event.fixTouchEvent(l),a(u,l,{type:"btaphold"}))},750)})}function r(n){var r=t();e(this).on(r.start,n.selector,function(t){var n=!1,o=t,u=brite.event.eventPagePosition(o),c=t.target,v=e(c),b=e(document),h="_"+brite.uuid(7);b.on(r.move+"."+h,function(t){var r,o=brite.event.eventPagePosition(t);e("body").css("-webkit-user-select","none"),n||(Math.abs(u.pageX-o.pageX)>p||Math.abs(u.pageY-o.pageY)>p)&&(n=!0,s=!0,v.data("bDragCtx",{}),r=i(t,v,f),a(c,t,{type:f,target:c,bextra:r}),t.stopPropagation(),t.preventDefault()),n&&(r=i(t,v,l),a(c,t,{type:l,target:c,bextra:r}),t.stopPropagation(),t.preventDefault())}),b.on(r.end+"."+h,function(t){if(e("body").css("-webkit-user-select",""),n){var r=i(t,v,d);a(c,t,{type:d,target:c,bextra:r}),t.stopPropagation(),t.preventDefault()}b.off("."+h),s=!1})})}function i(e,t,n){brite.event.fixTouchEvent(e);var r=brite.ua.hasTouch(),i={eventSource:e,pageX:e.pageX,pageY:e.pageY},o=e.originalEvent;r&&(i.touches=o.touches);var a=t.data("bDragCtx");return n===f?(a.startPageX=i.startPageX=i.pageX,a.startPageY=i.startPageY=i.pageY,a.lastPageX=a.startPageX=i.startPageX,a.lastPageY=a.startPageY=i.startPageY):n===d&&(i.pageX=a.lastPageX,i.pageY=a.lastPageY),i.startPageX=a.startPageX,i.startPageY=a.startPageY,i.deltaX=i.pageX-a.lastPageX,i.deltaY=i.pageY-a.lastPageY,a.lastPageX=i.pageX,a.lastPageY=i.pageY,i}function o(t,n){e.each(t,function(t,r){e.event.special[r]={setup:function(){e(this).bind(n,e.noop)}}})}function a(t,n,r){var i=jQuery.extend(new jQuery.Event,n,r);e(t).trigger(i)}var s=!1,u={start:"mousedown",move:"mousemove",end:"mouseup"},c={start:"touchstart",move:"touchmove",end:"touchend"};e.event.special.btap={add:n},e.event.special.btaphold={add:n},o(["btaphold"],"btap");var f="bdragstart",l="bdragmove",d="bdragend",p=5;e.event.special[f]={add:r},e.event.special[l]={add:r},e.event.special[d]={add:r},e.event.special.btransitionend={setup:function(e,t){var n="transitionend";this.addEventListener?(brite.ua.browser.mozilla||(n=brite.ua.cssVarPrefix().toLowerCase()+"TransitionEnd"),this.addEventListener(n,function(e){a(this,e,{type:"btransitionend"})})):a(this,jQuery.Event("btransitionend"),{type:"btransitionend"})}}}(jQuery);