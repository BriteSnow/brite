var brite=brite||{};brite.version="1.1.5-SNAPSHOT";if(typeof module==="object"&&module&&typeof module.exports==="object"){module.exports=brite}else{if(typeof define==="function"&&define.amd){define("brite",[],function(){return brite})}else{window.brite=brite}}(function(b){var d=".";var f=".";var p=0;var k={};var h={};var s={};var g={};brite.registerView=function(B,A,y){var C={};C.name=B;C.componentFactory=(y)?y:A;var z=(y)?A:null;C.config=b.extend({},brite.viewDefaultConfig,z);k[B]=C;var x=s[B];if(x){x.resolve(C);delete s[B]}};brite.registerComponent=brite.registerView;brite.registerTransition=function(x,y){g[x]=y};brite.getTransition=function(x){return g[x]};brite.display=function(A,y,z,x){if(y){x=x||{};x.parent=y}return m(A,z,x)};brite.legacyDisplay=function(A,z,x){var y=(x)?x.parent:null;brite.display(A,y,z,x)};brite.attach=function(A,x,z,y){return m(A,z,y,x)};brite.config={componentsHTMLHolder:"body",tmplPath:"tmpl/",jsPath:"js/",cssPath:"css/",tmplExt:".tmpl"};brite.viewDefaultConfig={loadTmpl:false,loadCss:false,emptyParent:false,postDisplayDelay:0};brite.defaultComponentConfig=brite.viewDefaultConfig;function v(x){var z=b.Deferred();var y=j(x);y.done(function(I){var E,F;var A=I.config.loadTmpl;if(A&&!h[x]){var D=true;var K=I.config.checkTemplate;if(K){var H=(typeof K=="string")?K:("#tmpl-"+x);if(b(H).length>0){D=false}}if(D){E=b.Deferred();var J=(typeof A=="string")?J:(x+".html");b.ajax({url:brite.config.tmplPath+x+brite.config.tmplExt,async:true}).complete(function(L,M){b(brite.config.componentsHTMLHolder).append(L.responseText);h[x]=true;E.resolve()})}}var G=I.config.loadCss;if(G){F=b.Deferred();var B=brite.config.cssPath+x+".css";var C=e(B,"css");C.done(function(){F.resolve()}).fail(function(){if(console){console.log("Brite ERROR: cannot load "+B+". Ignoring issue")}F.resolve()})}b.when(E,F).done(function(){z.resolve(I)})});y.fail(function(A){if(console){console.log("BRITE-ERROR: Brite cannot load component: "+x+"\n\t "+A)}z.reject()});return z.promise()}function j(y){var x=b.Deferred();var B=k[y];if(B){x.resolve(B)}else{var z=brite.config.jsPath+y+".js";var A=e(z,"js");A.done(function(){B=k[y];if(B){x.resolve(B)}else{x.reject("Component js file ["+z+"] loaded, but it did not seem to have registered the view - it needs to call brite.registerView('"+y+"',...config...) - see documentation")}}).fail(function(){x.reject("Component resource file "+z+" not found")})}return x.promise()}function m(x,D,B,G){var z=v(x);var C=b.Deferred();var F=b.Deferred();var A=b.Deferred();var y=b.Deferred();var E=C.promise();E.whenCreate=F.promise();E.whenInit=A.promise();E.whenPostDisplay=y.promise();z.done(function(L){B=o(L,B);var J=t(L);if(B.unique){var H=b("[data-b-view='"+x+"']");if(H.length>0){J=H.bComponent();C.resolve(J);return C}}var K=b.Deferred();if(!G){var I=n(J,D,B);if(I&&b.isFunction(I.promise)&&!I.jquery){I.done(function(M){K.resolve(M)}).fail(function(){K.reject()})}else{if(I){G=I}K.resolve(G)}}else{K.resolve(G)}K.promise().done(function(N){var M;if(N){if(typeof N==="string"){N=N.trim()}M=b(N);q(M,J,D,B);M.data("componentProcessPromise",E);F.resolve(J);b.when(l(J,D,B)).done(function(){r(J,D,B);A.resolve(J)})}else{F.resolve(J);A.resolve(J)}E.whenInit.done(function(){var P,O;if(M&&M.parent()){var Q=M.parent().closest("[data-b-view]");if(Q.length>0){P=Q.data("componentProcessPromise");if(P){P.whenPostDisplay.done(function(){O=i(J,D,B);O.done(function(){y.resolve(J)}).fail(function(R){y.reject(R)})})}}}if(!P){O=i(J,D,B);O.done(function(){y.resolve(J)}).fail(function(R){y.reject(R)})}})});E.whenPostDisplay.done(function(){C.resolve(J)}).fail(function(M){C.reject(M)})});z.fail(function(){C.reject();F.reject();A.reject();y.reject()});return E}function r(y,z,x){var A;if(x.transition){var B=brite.getTransition(x.transition);if(B){B(y,z,x)}else{brite.log.error("Transition ["+x.transition+"] not found. Transitions need to be registered via brite.registerTranstion(..) before call.")}}else{if(x.replace){b(x.replace).bRemove()}if(x.parent){A=b(x.parent);if(A.length>0){if(x.emptyParent){A.bEmpty()}A.append(y.$el)}else{if(console){console.log("BRITE WARNING - parent ",x.parent," not found when displaying",y)}}}else{if(console){console.log("BRITE WARNING - no parent specified ",y,x)}}}}function o(y,x){var z=b.extend({},y.config,x);z.componentName=y.name;return z}function t(z){var x;var y=z.componentFactory;if(y){if(b.isFunction(y)){x=y()}else{if(b.isPlainObject(y)){x=b.extend({},y)}else{brite.log.error("Invalid ComponentFactory for component ["+z.componentName+"]. Only types Function or Object are supported as componentFactory. Empty component will be created.")}}}else{brite.log.error("No ComponentFactory for component ["+z.componentName+"]")}if(x){x.name=z.name;x.cid=x.id="bview_"+p++}return x}function n(y,z,x){var A=y.create||y.build;if(!A||!b.isFunction(A)){brite.log.error("Invalid 'create' function for component ["+y.name+"].");return}return A.call(y,z,x)}function l(y,z,x){var A=y.init;if(b.isFunction(A)){return A.call(y,z,x)}}function q(x,z,A,y){z.el=x[0];z.$el=z.$element=x;x.data("bview",z);x.attr("data-b-view",y.componentName);x.attr("data-brite-cid",z.cid)}function i(y,A,x){var z=b.Deferred();if(y.events){a(y.events,y.$el,y)}if(y.docEvents){a(y.docEvents,b(document),y,d+y.id)}if(y.winEvents){a(y.winEvents,b(window),y,f+y.id)}if(y.parentEvents){b.each(y.parentEvents,function(C,E){var D=y.$el.bView(C);if(D){var B=y.parentEvents[C];a(B,D.$el,y,"."+y.id)}})}u(y);if(y.postDisplay){if(x.postDisplayDelay>=0){setTimeout(function(){w(y,A,x,z)},x.postDisplayDelay)}else{w(y,A,x,z)}}else{z.resolve()}return z.promise()}function w(y,B,x,A){if(!y.$el){A.reject("BRITE ERROR cannot call postDisplay a view already deleted "+((y)?y.name:""));return}var z=y.postDisplay(B,x);if(z&&b.isFunction(z.promise)){z.done(function(){A.resolve()})}else{A.resolve()}}function a(z,A,x,y){b.each(z,function(C,G){var B=C.split(";");var D=B[0];if(y){D=b.map(b.trim(D).split(" "),function(H){return H+y}).join(" ")}var F=B[1];var E=c(x,G);if(E){A.on(D,F,function(){var H=b.makeArray(arguments);E.apply(x,H)})}else{throw"BRITE ERROR: '"+x.name+"' component event handler function '"+G+"' not found."}})}function u(y){var x=y.daoEvents;if(y.daoEvents){var z=y.id;b.each(x,function(B,F){var E=c(y,F);if(E){var A=B.split(";");var C=A[0];C=C.charAt(0).toUpperCase()+C.slice(1);var D=A[1];var G=A[2];brite.dao["on"+C](D,G,function(I){var H=b.makeArray(arguments);E.apply(y,H)},z)}else{throw"BRITE ERROR: '"+y.name+"' component daoEvent handler function '"+F+"' not found."}})}}function c(x,z){var y=z;if(!b.isFunction(y)){y=x[z]}return y}function e(C,y){var x=b.Deferred();var B;if(y==="js"){B=document.createElement("script");B.setAttribute("type","text/javascript");B.setAttribute("src",C)}else{if(y==="css"){B=document.createElement("link");B.setAttribute("rel","stylesheet");B.setAttribute("type","text/css");B.setAttribute("href",C)}}if(y==="js"){if(B.addEventListener){B.onload=function(){x.resolve(C)}}else{B.onreadystatechange=function(){if(B.readyState==="loaded"||B.readyState==="complete"){x.resolve(C)}}}if(B.addEventListener){B.addEventListener("error",function(){x.reject()},true)}}else{if(y==="css"){if(document.all){B.onreadystatechange=function(){var D=B.readyState;if(D==="loaded"||D==="complete"){B.onreadystatechange=null;x.resolve(C)}}}else{if(B.addEventListener){B.addEventListener("load",function(){x.resolve(C)},false)}var A=document.getElementsByTagName("html")[0];var z=document.createElement("img");b(z).css("display","none");z.onerror=function(){A.removeChild(z);x.resolve(C)};A.appendChild(z);z.src=C}}}if(typeof B!="undefined"){document.getElementsByTagName("head")[0].appendChild(B)}return x.promise()}})(jQuery);(function(d){var b=".";var c=".";d.fn.bEmpty=function(){return this.each(function(){var f=d(this);var e=f.bFindComponents();d.each(e,function(h,g){a(g)});f.empty()})};d.fn.bRemove=function(){return this.each(function(){var f=d(this);f.bEmpty();if(f.is("[data-b-view]")){var e=f.data("bview");a(e);f.remove()}else{f.remove()}})};function a(e){if(e){d(document).off(b+e.id);d(window).off(c+e.id);if(brite.dao){brite.dao.offAny(e.id)}if(e.parentEvents&&e.$el){d.each(e.parentEvents,function(g,i){var h=e.$el.bView(g);if(h&&h.$el){h.$el.off("."+e.id)}})}var f=e.destroy;if(d.isFunction(f)){f.call(e)}delete e.$el;delete e.$element}}})(jQuery);(function(a){a.fn.bView=function(c){var b;if(c){b=a(this).closest("[data-b-view='"+c+"']")}else{b=a(this).closest("[data-b-view]")}return b.data("bview")}})(jQuery);(function(a){a.fn.bComponent=a.fn.bView;a.fn.bFindComponents=function(b){var c=[];this.each(function(){var d=a(this);var e;if(b){e=a(this).find("[data-b-view='"+b+"']")}else{e=a(this).find("[data-b-view]")}e.each(function(){var f=a(this);c.push(f.data("bview"))})});return c};a.fn.bFindFirstComponent=function(b){var c=[];this.each(function(){var d=a(this);var e;if(b){e=a(this).find("[data-b-view='"+b+"']:first")}else{e=a(this).find("[data-b-view]:first")}e.each(function(){var f=a(this);c.push(f.data("bview"))})});return c}})(jQuery);(function(d){if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}var b={failOnFirst:true};brite.whenEach=function(g,m,l){var f=d.Deferred();var k=[];var j=0;l=d.extend({},b,l);h();function h(){if(j<g.length){var n=g[j];var i=m(n,j);if(typeof i!=="undefined"&&i!==null&&d.isFunction(i.promise)&&!i.jquery){i.done(function(o){k.push(o);j++;h()});i.fail(function(p){var o=d.map(function(r,q){return{success:true,value:r}});o.push({success:false,value:p});f.reject(o)})}else{k.push(i);j++;h()}}else{f.resolve(k)}}return f.promise()};var c="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split("");brite.uuid=function(f,j){var k=c,h=[];j=j||k.length;f=f||10;for(var g=0;g<f;g++){h[g]=k[0|Math.random()*j]}return h.join("")};brite.value=function(m,h){if(!m){return m}if(!h){return m}var f;var k,g,n=h.split(".");var j,o=m;for(k=0,g=n.length;k<g;k++){j=n[k];if(o==null){return undefined}o=o[j];if(typeof o==="undefined"){return o}}return o};brite.substract=function(h,g){var f={};d.each(h,function(i,k){var j=g[i];if(!isNaN(k)&&!isNaN(j)){f[i]=k-j}});return f};brite.add=function(h,g){var f={};d.each(h,function(i,k){var j=g[i];if(!isNaN(k)&&!isNaN(j)){f[i]=k+j}});return f};brite.array={remove:function(f,i,h){var g=f.slice((h||i)+1||f.length);f.length=i<0?f.length+i:i;return f.push.apply(f,g)},getIndex:function(g,j,m){if(g&&j&&typeof m!="undefined"){var h,k,f=g.length;for(h=0;h<f;h++){k=g[h];if(k&&k[j]===m){return h}}}return -1},getItem:function(g,h,i){var f=this.getIndex(g,h,i);if(f>-1){return g[f]}else{return null}},sortBy:function(f,g){return f.sort(h);function h(k,j){if(typeof k==="undefined"){return -1}if(typeof j==="undefined"){return 1}var i=k[g];var l=j[g];return((i<l)?-1:((i>l)?1:0))}},toMap:function(g,k){var j,f=g.length;var n={},m,h;for(j=0;j<f;j++){m=g[j];h=m[k];if(typeof h!="undefined"&&h!=null){n[h]=m}}return n}};brite.randomInt=function(h,g){var f=g-h;return h+Math.floor(Math.random()*(f+1))};brite.inherit=function(h,g){var f=function(){};f.prototype=g.prototype;h.prototype=new f();h._super=g.prototype;h.prototype.constructor=h};var a=2;var e;brite.flushUI=function(){if(brite.ua.hasTouch()){if(!e){e=d("<div id='b-flushUI' style='position:absolute;opacity:1;z-index:-1000;overflow:hidden;width:2px;color:rgba(0,0,0,0)'>flushUI</div>");d("body").append(e)}a=a*-1;e.text("").text(a);e.css("width",a+"px")}}})(jQuery);brite.ua={};(function(f){var r={webkit:"-webkit-",chrome:"-webkit-",mozilla:"-moz-",msie:"-ms-",opera:"-o-"};var n={webkit:"Webkit",mozilla:"Moz",chrome:"Webkit",msie:"ms",opera:"o"};var c=null;var d=null;var s=null;var i=null;var a=null;var k=null;var t=null;var b=null;var e=null;var m={};var o=null;function p(v){v=v.toLowerCase();var u=/(chrome)[ \/]([\w.]+)/.exec(v)||/(webkit)[ \/]([\w.]+)/.exec(v)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(v)||/(msie) ([\w.]+)/.exec(v)||v.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(v)||[];return{browser:u[1]||"",version:u[2]||"0"}}var h=p(navigator.userAgent);var q={};if(h.browser){q[h.browser]=true;q.version=h.version}if(q.chrome){q.webkit=true}else{if(q.webkit){q.safari=true}}brite.ua.browser=q;function l(){f.each(r,function(u,v){if(brite.ua.browser[u]){o=u;d=r[u];c=n[u]}})}brite.ua.cssPrefix=function(){if(d===null){l()}return d};brite.ua.cssVarPrefix=function(){if(c===null){l()}return c};brite.ua.cssHas=function(){if(s===null){var u="has";s="";f.each(brite.ua,function(w){var v=brite.ua[w];var x;if(w.indexOf(u)===0&&f.isFunction(v)){if(v.call(brite.ua)){x="has-"+w.substring(u.length).toLowerCase();s+=x+" "}}})}return s};brite.ua.cssHasNo=function(){if(i===null){var u="has";i="";f.each(brite.ua,function(w){var v=brite.ua[w];var x;if(w.indexOf(u)===0&&f.isFunction(v)){if(!v.call(brite.ua)){x="has-no-"+w.substring(u.length).toLowerCase();i+=x+" "}}})}return i};brite.ua.supportsEvent=function(u){var v=m[u];if(typeof v==="undefined"){v=j(u);m[u]=v}return v};brite.ua.mouseOnly=false;brite.ua.hasTouch=function(){var u=(this.supportsEvent("touchstart")&&!brite.ua.mouseOnly);return u};brite.ua.hasCanvas=function(){if(b===null){var u=document.createElement("canvas");b=(u.getContext)?true:false}return b};brite.ua.hasTransition=function(){if(k===null){k=g("transition","Transition","color 1s linear",true)}return k};brite.ua.hasBackfaceVisibility=function(){if(t===null){t=g("backface-visibility","BackfaceVisibility","hidden",true);if(navigator.platform.toLowerCase().indexOf("win")>-1){t=false}}return t};function g(v,x,u,w){var y=document.createElement("div");v=(w)?(brite.ua.cssPrefix()+v):v;y.innerHTML='<div style="'+v+": "+u+'"></div>';x=(w)?(brite.ua.cssVarPrefix()+x):x;return(y.firstChild.style[x])?true:false}var j=(function(){var v={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};function u(w){var y=document.createElement(v[w]||"div");w="on"+w;var x=(w in y);if(!x){y.setAttribute(w,"return;");x=typeof y[w]=="function"}y=null;return x}return u})()})(jQuery);var brite=brite||{};(function(h){var p={};var b={};var n={};function k(u){var t=p[u];if(t){return t}else{var v="Cannot find the DAO for objectType: "+u;throw v}}brite.dao=function(t){return k(t)};var o={isDataChange:true,entityType:true};var f=/remove|delete|create|update/i;brite.registerDao=function(v){var t={};var u=(h.isFunction(v.entityType))?v.entityType():v.entityType;if(!u||typeof u!=="string"){throw"Cannot register daoHandler because entityType '"+u+"' is not valid. Make sure the daoHandler emplement .entityType() method which must return a string of the entity type"}t._entityType=u;t._handler=v;h.each(v,function(y,x){if(h.isFunction(v[y])&&!o[y]){var w=y;var z=f.test(w);if(v.isDataChange){z=z||v.isDataChange(w)}t[w]=(function(B,A,C){return function(){var E=v[A].apply(v,arguments);var D=j(E);q(B,A,D);D.done(function(F){a(B,A,F);if(C){brite.triggerDataChange(B,A,F)}});return D}})(u,w,z)}});p[u]=t;if(h.isFunction(t.init)){t.init(u)}return t};var g="_ALL_";function d(t){var u,z,w,x={};for(u=t.length-1;u>-1;u--){z=t[u];if(h.isFunction(z)){x.func=z}else{if(!x.func){w=z}else{if(x.func&&u===1){x.actions=z}else{if(x.func&&u===0){x.objectTypes=z}}}}}if(typeof w==="undefined"){throw"BRITE DAO BINDING ERROR: any binding with brite.dao.on*** needs to have a namespace after the function.  Remember to cleanup the event at component close with brite.dao.off(mynamespace)"}if(!x.actions){x.actions=g+"."+w}else{var v="."+w+" ";x.actions=x.actions.split(",").join(v)+v}if(x.objectTypes){var y=x.objectTypes.split(",");h.each(y,function(A,B){y[A]="."+h.trim(B)});x.objectTypes=y.join(",")}x.namespace=w;return x}function e(y,v,u,x){var t=h.extend(jQuery.Event(x.action),{daoEvent:x});var w=y[u];if(!w){y[u]=w=h("<div class='"+u+"'></div>");v.append(w)}w.trigger(t);if(t.type==="remove"&&v.find("."+u).size()==0&&w){v.append(w)}t.type=g;w.trigger(t)}var c=h("<div></div>");var r={};brite.dao.onDao=function(x,w,v,t){var u=d(arguments);c.on(u.actions,u.objectTypes,u.func);return u.namespace};brite.dao.offDao=function(t){c.off("."+t)};function q(u,w,t){var v={entityType:u,action:w,resultPromise:t};e(r,c,u,v)}var l=h("<div></div>");var s={};brite.dao.onResult=function(x,w,v,t){var u=d(arguments);l.on(u.actions,u.objectTypes,u.func);return u.namespace};brite.dao.offResult=function(t){l.off("."+t)};function a(u,w,t){var v={entityType:u,action:w,result:t};e(s,l,u,v)}var i=h("<div></div>");var m={};brite.dao.onDataChange=function(x,w,u,t){var v=d(arguments);i.on(v.actions,v.objectTypes,v.func);return v.namespace};brite.dao.offDataChange=function(t){i.off("."+t)};brite.triggerDataChange=function(u,w,t){var v={entityType:u,action:w,result:t};e(m,i,u,v)};brite.dao.offAny=function(t){brite.dao.offResult(t);brite.dao.offDao(t);brite.dao.offDataChange(t)};function j(u){if(u&&h.isFunction(u.promise)){return u}else{var t=h.Deferred();t.resolve(u);return t}}})(jQuery);(function(a){a.fn.bEntity=function(d){var c,b=null;this.each(function(){if(b===null){var g=a(this);var f;if(d){f=g.closest("[data-entity='"+d+"']")}else{f=g.closest("[data-entity]")}if(f.length>0){b={type:f.attr("data-entity"),id:f.attr("data-entity-id"),$el:f};var e=f.attr("data-entity-name");if(typeof e!=="undefined"){b.name=e}}}});return b}})(jQuery);(function(a){a.fn.bObjRef=function(d){var b=[];var c=null;this.each(function(){var f=a(this);var e;if(d){e=f.closest("[data-obj_type='"+d+"']")}else{e=f.closest("[data-obj_type]")}if(e.length>0){var g={type:e.attr("data-obj_type"),id:e.attr("data-obj_id"),$element:e};b.push(g)}});if(b.length===0){return null}else{if(b.length===1){return b[0]}else{return b}}}})(jQuery);var brite=brite||{};brite.event=brite.event||{};(function(a){brite.event.fixTouchEvent=function(b){if(brite.ua.hasTouch()){var c=b.originalEvent;if(c.touches.length>0){b.pageX=c.touches[0].pageX;b.pageY=c.touches[0].pageY}}return b};brite.event.eventPagePosition=function(d){var c,b;if(d.originalEvent&&d.originalEvent.touches){c=d.originalEvent.touches[0].pageX;b=d.originalEvent.touches[0].pageY}else{c=d.pageX;b=d.pageY}return{pageX:c,pageY:b}}})(jQuery);(function(b){b.fn.bTransition=function(c){return this.each(function(){var e=b(this);var d=-1;if(typeof c.onTimeout==="boolean"){d=(c.onTimeout)?0:-1}else{if(typeof c.onTimeout==="number"){d=c.onTimeout}}if(d>-1){setTimeout(function(){a(e,c)},d)}else{a(e,c)}})};function a(d,c){d.css("transition",c.transition);d.css("transform",c.transform)}})(jQuery);(function(c){var n=false;var j={start:"mousedown",move:"mousemove",end:"mouseup"};var b={start:"touchstart",move:"touchmove",end:"touchend"};function d(){if(brite.ua.hasTouch()){return b}else{return j}}c.event.special.btap={add:a};c.event.special.btaphold={add:a};function a(s){var t=d();c(this).on(t.start,s.selector,function(z){var y=this;var v=c(y);var x=z.target,u=z,B;function A(E){w();if(E.target===x&&!n){var C=E.eventPhase;var D=(y===x&&C===2)||(y!==x&&C===3);if(D&&!E.originalEvent.b_processed){brite.event.fixTouchEvent(u);g(y,E,{type:"btap",pageX:u.pageX,pageY:u.pageY});E.originalEvent.b_processed=true}}}function w(){clearTimeout(B);v.off(t.end,A)}v.on(t.end,A);B=setTimeout(function(){if(!n){brite.event.fixTouchEvent(u);g(y,u,{type:"btaphold"})}},750)})}m(["btaphold"],"btap");var l="bdragstart",h="bdragmove",q="bdragend";var e="bdragenter",k="bdragover",o="bdragleave",f="bdrop";var i=5;c.event.special[l]={add:p};c.event.special[h]={add:p};c.event.special[q]={add:p};function p(s){var t=d();c(this).on(t.start,s.selector,function(u){var x=this;var v=c(this);var w=false;var B=u;var A=brite.event.eventPagePosition(B);var D=u.target;var y=c(D);var z=c(document);var C="_"+brite.uuid(7);z.on(t.move+"."+C,function(G){var F;var E=brite.event.eventPagePosition(G);c("body").css("-webkit-user-select","none");if(!w){if(Math.abs(A.pageX-E.pageX)>i||Math.abs(A.pageY-E.pageY)>i){w=true;n=true;y.data("bDragCtx",{});F=r(G,y,l);g(D,G,{type:l,target:D,bextra:F});G.stopPropagation();G.preventDefault()}}if(w){F=r(G,y,h);g(D,G,{type:h,target:D,bextra:F});G.stopPropagation();G.preventDefault()}});z.on(t.end+"."+C,function(F){c("body").css("-webkit-user-select","");if(w){var E=r(F,y,q);g(D,F,{type:q,target:D,bextra:E});F.stopPropagation();F.preventDefault()}z.off("."+C);n=false})})}function r(w,t,v){brite.event.fixTouchEvent(w);var x=brite.ua.hasTouch();var s={eventSource:w,pageX:w.pageX,pageY:w.pageY};var y=w.originalEvent;if(x){s.touches=y.touches}var u=t.data("bDragCtx");if(v===l){u.startPageX=s.startPageX=s.pageX;u.startPageY=s.startPageY=s.pageY;u.lastPageX=u.startPageX=s.startPageX;u.lastPageY=u.startPageY=s.startPageY}else{if(v===q){s.pageX=u.lastPageX;s.pageY=u.lastPageY}}s.startPageX=u.startPageX;s.startPageY=u.startPageY;s.deltaX=s.pageX-u.lastPageX;s.deltaY=s.pageY-u.lastPageY;u.lastPageX=s.pageX;u.lastPageY=s.pageY;return s}c.event.special.btransitionend={setup:function(u,t){var s="transitionend";if(this.addEventListener){if(!brite.ua.browser.mozilla){s=brite.ua.cssVarPrefix().toLowerCase()+"TransitionEnd"}this.addEventListener(s,function(v){g(this,v,{type:"btransitionend"})})}else{g(this,jQuery.Event("btransitionend"),{type:"btransitionend"})}}};function m(t,s){c.each(t,function(u,v){c.event.special[v]={setup:function(){c(this).bind(s,c.noop)}}})}function g(u,s,t){var v=jQuery.extend(new jQuery.Event(),s,t);c(u).trigger(v)}})(jQuery);